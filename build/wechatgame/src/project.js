require=function n(c,h,a){function r(e,t){if(!h[e]){if(!c[e]){var i="function"==typeof require&&require;if(!t&&i)return i(e,!0);if(l)return l(e,!0);var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}var o=h[e]={exports:{}};c[e][0].call(o.exports,function(t){return r(c[e][1][t]||t)},o,o.exports,n,c,h,a)}return h[e].exports}for(var l="function"==typeof require&&require,t=0;t<a.length;t++)r(a[t]);return r}({AudioManage:[function(t,e,i){"use strict";cc._RF.push(e,"39e1ejY/AJDJ6oFy5cA5wh/","AudioManage");var s="bmg.mp3";cc.Class({extends:cc.Component,properties:{},init:function(){this.bgmVolume=1,this.sfxVolume=1,this.bgmAudioID=-1,this._musicOpen=!0,this._sfxOpen=!0,cc.game.on(cc.game.EVENT_HIDE,function(){console.log("cc.audioEngine.pauseAll"),cc.audioEngine.pauseAll()}),cc.game.on(cc.game.EVENT_SHOW,function(){console.log("cc.audioEngine.resumeAll"),cc.audioEngine.resumeAll()});var t=Tool.getData("_musicOpen"),e=Tool.getData("_sfxOpen");this._musicOpen="1"==t||null==t,this._sfxOpen="1"==e||null==e},getUrl:function(t){return cc.url.raw("resources/Sound/"+t)},playBGM:function(t){if(this._musicOpen){var e=this.getUrl(t);0<=this.bgmAudioID&&cc.audioEngine.stop(this.bgmAudioID),this.bgmAudioID=cc.audioEngine.play(e,!0,this.bgmVolume)}},stopBGM:function(){0<=this.bgmAudioID&&cc.audioEngine.stop(this.bgmAudioID)},playSFX:function(t){if(0!=this._sfxOpen){var e=this.getUrl(t);0<this.sfxVolume&&cc.audioEngine.play(e,!1,this.sfxVolume)}},pauseAll:function(){cc.audioEngine.pauseAll()},resumeAll:function(){cc.audioEngine.resumeAll()},sFXSwitch:function(t){this._sfxOpen=t,Tool.saveData("_sfxOpen",t?1:0)},mucSwitch:function(t){(this._musicOpen=t)?this.playBGM(s):cc.audioEngine.stopAll(),Tool.saveData("_musicOpen",t?1:0)},playVioMsg:function(){},pushVioMsg:function(){},checkPlayVioMsg:function(){},setSoundVolume:function(t){this.sfxVolume=t,cc.audioEngine.setVolume(this.bgmAudioID,t)},start:function(){}}),cc._RF.pop()},{}],Bullet:[function(t,e,i){"use strict";cc._RF.push(e,"7bbbdiGfkhDQqkX5wFQ7ixV","Bullet");var s=t("Constants").NODE_TYPE;cc.Class({extends:cc.Component,properties:{bullet1:{default:null,type:cc.SpriteFrame},bullet2:{default:null,type:cc.SpriteFrame},speedV:{default:7}},ctor:function(){this.isFight=!1,this.nType=s.BULLET,this.speed=cc.v2(0,10),this.isFight=!1,this.masterType=s.ANY},start:function(){},initBullet:function(){this.collider=this.node.getComponent(cc.BoxCollider),this.collider.enabled=!1,this.reset()},reset:function(){this.node.active=!1,this.isFight=!1,this.collider.enabled=!1},getSpeed:function(t){var e=cc.pDistance(t,cc.v2(0,0));return 0==e?cc.v2(0,0):cc.v2(this.speedV*t.x/e,this.speedV*t.y/e)},atkPlayer:function(t,e){this.masterType=e,this.collider.tag=this.nType+e,this.node.active=!0,this.speed=this.getSpeed(t),this.isFight=!0,this.collider.enabled=!0},onCollisionEnter:function(t,e){t.tag&this.nType||t.tag&this.masterType||this.reset()},update:function(t){this.node.active&&(this.node.position=cc.pAdd(this.node.position,this.speed),this.node.position.y<-G.SIZE.height/2&&this.reset())}}),cc._RF.pop()},{Constants:"Constants"}],Constants:[function(t,e,i){"use strict";cc._RF.push(e,"af16dfWBLJHobBCitsUkbXF","Constants");var s=cc.Enum({Normal:0,WIN:10,FAIL:11}),o=cc.Enum({ANY:0,PLANE:1,BEE:2,BULLET:4}),n=cc.Enum({Normal:0,ATK:1,ReDown:10,ReDownRotate:11,ReDownAtk:12,Death:20}),c=cc.Enum({Normal:0,ATK:1,Death:2}),h=cc.Enum({BUTTON:0,AUTO:1});e.exports={NODE_TYPE:o,BEE_STATE:n,PLANE_STATE:c,GAME_STATE:s,OM:h},cc._RF.pop()},{}],CoreLogic:[function(t,e,i){"use strict";cc._RF.push(e,"b8e6eN8ZA1BLbMqmqMiXJ4a","CoreLogic");var s=t("Constants"),a=s.GAME_STATE,o=s.OM;cc.Class({extends:cc.Component,properties:{mPlayer:cc.Node,speed:cc.v2(0,0),touchLayer:cc.Node,overLayer:cc.Node,winLayer:cc.Node,beeTexts:[cc.Label],txtScore:cc.Label,txtLevel:cc.Label,txtLife:cc.Label,startNode:cc.Node,btnLeft:cc.Node,btnRight:cc.Node,btnFire:cc.Node,pfBullet:{default:null,type:cc.Prefab,displayName:"Bullet",tooltip:"子弹预制件"},pfEnemy:{default:null,displayName:"Enemy",tooltip:"敌人预制件",type:cc.Prefab}},ctor:function(){(cc.core=this).isMoveLeft=!0,this.beeSpeed=3,this.bulletPool=[],this.beeList=[],this.beeRowList=[],this.beeAtkTimeSize=3,this.npcBulletNumAdd=.2,this.gameState=a.Normal,this.moveX=0},start:function(){this.playerScript=this.mPlayer.getComponent("Player"),this.initCollision(),this.initBee(),this.initUI(),this.registTouch(),this.refreshUI(),this.winLayer.active=!1,this.overLayer.active=!1,this.scheduleOnce(function(){this.atkMgr()},3.5)},starGame:function(){this.gameState=a.Normal,this.resetBee(),this.refreshUI()},restart:function(){this.gameState=a.Normal,this.resetBee(),this.resetPlane(),this.refreshUI()},initUI:function(){this.touchLayer.active=G.GM.isMode(o.AUTO),this.btnLeft.active=G.GM.isMode(o.BUTTON),this.btnRight.active=G.GM.isMode(o.BUTTON),this.btnFire.active=G.GM.isMode(o.BUTTON)},relive:function(){this.gameState=a.Normal,this.resetPlane(),this.refreshUI()},initBee:function(){for(var t=this.startNode.position,e=cc.v2(44,44),i=G.GM.layout(),s=0;s<i.length;s++)for(var o=i[s],n=0;n<o.length;n++)if(0!=o[n]){var c=cc.instantiate(this.pfEnemy),h=c.getComponent("Enemy");c.position=cc.v2(t.x+e.x/2+e.x*n,t.y-e.y/2-e.y*s),h.init(o[n],this.mPlayer,n,s),this.node.addChild(c),this.beeList.push(c),this.beeRowList[n]=this.beeRowList[n]?this.beeRowList[n]:[],this.beeRowList[n][s]=c}},refreshUI:function(){this.txtLife.string=G.GM.getLife(),this.txtScore.string=G.GM.getScore(),this.txtLevel.string=G.GM.getLevel();for(var t=1;t<=4;t++){var e=this.beeTexts[t-1],i=G.GM.getBee(t);e.string="x "+(i.max-i.die)+"/"+i.max}},initCollision:function(){cc.director.getCollisionManager().enabled=!0},registTouch:function(){this.touchLayer.on(cc.Node.EventType.TOUCH_START,this.touchCallback,this),this.touchLayer.on(cc.Node.EventType.TOUCH_MOVE,this.touchCallback,this),this.touchLayer.on(cc.Node.EventType.TOUCH_CANCEL,this.touchCallback,this),this.touchLayer.on(cc.Node.EventType.TOUCH_END,this.touchCallback,this),this.btnLeft.getComponent("XButton").on(this.touchLeftCallback,this),this.btnRight.getComponent("XButton").on(this.touchRightCallback,this),this.btnFire.getComponent("XButton").on(this.touchFireCallback,this)},touchCallback:function(t){var e=t.getLocation();t.type==cc.Node.EventType.TOUCH_START?this.touchStartPos=e:t.type==cc.Node.EventType.TOUCH_MOVE?this.movePlayer(cc.pSub(e,this.touchStartPos),!0):t.type==cc.Node.EventType.TOUCH_END?this.movePlayer(cc.pSub(e,this.touchStartPos),!0):t.type==cc.Node.EventType.TOUCH_CANCEL&&this.movePlayer(cc.pSub(e,this.touchStartPos),!0),this.touchStartPos=e},touchLeftCallback:function(t){this.movePlayer(cc.v2(-5,0),!1)},touchRightCallback:function(t){this.movePlayer(cc.v2(5,0),!1)},touchFireCallback:function(t){this.playerScript.fire()},movePlayer:function(t,e){this.gameState==a.Normal&&this.playerScript.move(t,e)},update:function(t){var e=this.findBeePos(this.isMoveLeft);this.isMoveLeft&&e<-260?this.isMoveLeft=!this.isMoveLeft:!this.isMoveLeft&&260<e&&(this.isMoveLeft=!this.isMoveLeft);var i=this.isMoveLeft?-1:1;for(var s in this.moveX+=i,this.beeList){this.beeList[s].getComponent("Enemy").leftAndRightMove(this.moveX)}},resetPlane:function(){this.mPlayer.getComponent("Player").reset()},resetBee:function(){for(var t in this.beeList){var e=this.beeList[t];e&&e.getComponent("Enemy").reset()}},resetBullet:function(){for(var t in this.bulletPool)bullet.getComponent("Bullet").reset()},beeDeath:function(t){G.GM.beeDeath(t),this.refreshUI(),G.GM.isWin()&&this.GameWin()},findBeePos:function(t){var e=0;if(t)for(var i in e=750,this.beeList){(s=this.beeList[i].position.x)<e&&this.beeList[i].active&&(e=s)}else for(var i in e=0,this.beeList){var s;e<(s=this.beeList[i].position.x)&&this.beeList[i].active&&(e=s)}return e},bossAtk:function(){var t=[],e=[],i=!0;50<100*Math.random()&&(i=!1);for(var s=0;s<this.beeRowList.length;s++){var o=this.beeRowList[s];if(i||(o=this.beeRowList[this.beeRowList.length-1-s]),null!=o[0]){var n=o[0].getComponent("Enemy");if(n.canATK()){t.push(o[0]),e.push(cc.v2(0,0));var c=n.getTiled();i=c.x<this.beeRowList.length/2;for(var h=-1;h<=1;h++){var a=this.beeRowList[c.x+h];if(i||(a=this.beeRowList[c.x-h]),a&&a[c.y+1])if(a[c.y+1].getComponent("Enemy").canATK()&&(t.push(a[c.y+1]),e.push(cc.v2(a[c.y+1].position.x-o[0].position.x,0))),3==t.length)break}return console.log("BOSS带队攻击"),{list:t,offset:e}}}}var r=null;for(s=0;s<this.beeRowList.length;s++){o=this.beeRowList[s];if(i||(o=this.beeRowList[this.beeRowList.length-1-s]),null!=o[1])if(o[1].getComponent("Enemy").canATK()&&(t.push(o[1]),r=r||o[1],e.push(cc.v2(o[1].position.x-r.position.x,0))),2==t.length)break}return console.log("没有BOSS带队攻击"),{list:t,offset:e}},beeAtk:function(){var t=[];if(10*Math.random()<5)for(var e=0;e<this.beeRowList.length;e++){for(var i=this.beeRowList[e],s=0;s<i.length;s++){if(null!=i[s])if(i[s].getComponent("Enemy").canATK()){t.push(i[s]);break}}if(0<t.length)break}else for(e=this.beeRowList.length-1;0<=e;e--){var o=this.beeRowList[e];for(s=0;s<o.length;s++){if(null!=o[s])if(o[s].getComponent("Enemy").canATK()){t.push(o[s]);break}}if(0<t.length)break}return t},atkMgr:function(){var t=this;if(this.gameState==a.Normal){var e=100*Math.random(),i=[],s=[];if(10<=G.GM.getKillNum()&&e<30){var o=this.bossAtk();i=o.list,s=o.offset,0==i.length&&(i=this.beeAtk(),s=[cc.v2(0,0)])}else i=this.beeAtk(),s=[cc.v2(0,0)];if(this.gameState==a.Normal)for(var n in i){i[n].getComponent("Enemy").starATK(s[n])}var c=Math.random(),h=this.beeAtkTimeSize+c-this.npcBulletNumAdd*(G.GM.getLevel()-1);this.scheduleOnce(function(){t.atkMgr()},h)}else this.scheduleOnce(function(){t.atkMgr()},1)},getBullet:function(){for(var t in this.bulletPool){var e=this.bulletPool[t];if(!e.active)return e}var i=cc.instantiate(this.pfBullet);return i.getComponent("Bullet").initBullet(),this.node.addChild(i),this.bulletPool.push(i),i},clearAllBullet:function(){for(var t in this.bulletPool){this.bulletPool[t].active=!1}},fire:function(t,e,i){var s=this.getBullet();s.position=t,s.getComponent("Bullet").atkPlayer(e,i)},getBeeMoveTime:function(t,e){return cc.pDistance(t,e)/this.beeSpeed/100},GameOver:function(){this.gameState=a.FAIL,G.GM.playerDie(),this.refreshUI(),this.overLayer.active=!0},GameWin:function(){this.gameState=a.WIN,this.winLayer.active=!0}}),cc._RF.pop()},{Constants:"Constants"}],DefaulScript:[function(t,e,i){"use strict";cc._RF.push(e,"de48fYuk2FEMaUfqa34e3d0","DefaulScript");var s=t("GameManager");cc.Class({extends:cc.Component,properties:{delay:1},ctor:function(){this.isChange=!1},start:function(){this.runTime=0,G.GM=new s,G.SIZE=cc.view.getVisibleSize(),cc.director.setDisplayStats(!1)},update:function(t){this.isChange||(this.runTime+=t,this.runTime>=this.delay&&this.playGame())},playGame:function(){this.isChange=!0,cc.director.loadScene("GameScene")}}),cc._RF.pop()},{GameManager:"GameManager"}],Enemy:[function(t,e,i){"use strict";cc._RF.push(e,"12750rFBL1K5awrrvAunu3E","Enemy");var s=t("Constants"),o=s.NODE_TYPE,c=s.BEE_STATE;cc.Class({extends:cc.Component,properties:{bulletNodePoint:{default:null,type:cc.Node,displayName:"Bullet Point",tooltip:"子弹初始化位置"},Clip:{default:null,type:cc.Animation}},ctor:function(){this.id=1,this.tiled=cc.v2(0,0)},init:function(t,e,i,s){this.id=t,this.tiled=cc.v2(i,s),this.mPlayer=e,this.nType=o.BEE,this.m_firstPos=this.node.position,this.collider=this.node.getComponent(cc.BoxCollider),this.m_sprite=this.node.getComponent(cc.Sprite),this.collider.tag=this.nType,this.Idle="B"+t,this.reset()},getTiled:function(){return cc.v2(this.tiled.x,this.tiled.y)},start:function(){},reset:function(){this.node.stopAllActions(),this.unscheduleAllCallbacks(),this.m_type=c.Normal,this.lookLock=!0,this.offsetX=0,this.isStand=!0,this.isFire=!1,this.node.rotation=0,this.node.active=!0,this.node.position=this.m_firstPos,this.node.rotation=0,this.Clip.play(this.Idle)},update:function(){switch(this.m_type){case c.Normal:break;case c.ReDown:case c.ReDownRotate:this.reFightDown()}this.lookLock||this.lookAtPlayer()},canATK:function(){return this.node.active&&this.isStand&&c.Normal==this.m_type},starATK:function(t){this.isStand=!1,this.node.stopAllActions();this.node.position;var e=1,i=-1;this.m_firstPos.x<0&&(e=-1,i=1);var s=this;this.moveOut(e,function(){s.hit(e,i,t)}),this.scheduleOnce(function(){this.fire()},1)},moveOut:function(t,e){var i=this.node.position,s=cc.rotateTo(.7,180*t),o=cc.bezierTo(.8,[cc.pAdd(i,cc.p(0*t,85)),cc.pAdd(i,cc.p(83*t,85)),cc.pAdd(i,cc.p(83*t,-20))]),n=cc.callFunc(e);this.m_type==c.Normal?this.node.runAction(cc.sequence(cc.spawn(s,o),n)):e()},hit:function(t,e,i){var s=this;i=i||cc.v2(0,0),this.lookLock=!1;var o=this.node.position,n=cc.pAdd(this.mPlayer.position,i),c=this.getMoveTime(o,n),h=cc.bezierTo(c,[cc.pAdd(o,cc.p(75*t,-120)),cc.pAdd(n,cc.p(51*e,50)),n]),a=cc.moveBy(.6,cc.p(0,-150)),r=cc.callFunc(function(){s.lookLock=!0}),l=cc.callFunc(function(){s.node.active=!1,s.reFight()});this.node.runAction(cc.sequence(h,r,a,l))},getAngle:function(t,e,i,s){var o=Math.abs(t-i),n=Math.abs(e-s),c=Math.sqrt(Math.pow(o,2)+Math.pow(n,2)),h=Math.acos(n/c),a=Math.floor(180/(Math.PI/h));return t<i&&e<s?a=180-a:i==t&&e<s?a=180:t<i&&s==e?a=90:i<t&&e<s?a=180+a:i<t&&s==e?a=270:i<t&&s<e&&(a=360-a),a},lookAtPlayer:function(){var t=this.mPlayer.position,e=this.getAngle(this.node.position.x,this.node.position.y,t.x,t.y);this.node.rotation=180-e},leftAndRightMove:function(t){this.offsetX=t,this.lookLock&&this.isStand&&this.m_type!=c.ReDownAtk&&(this.node.position=cc.p(this.m_firstPos.x+t,this.node.position.y))},reFight:function(){this.isStand=!0,this.node.position=cc.p(this.m_firstPos.x+this.offsetX,this.m_firstPos.y+300),this.m_type=c.ReDown,this.node.active=!0,this.node.rotation=0},reFightDown:function(){var t=this.node.position;this.node.position.y>this.m_firstPos.y+3?this.node.position=cc.p(t.x,t.y-3):(this.node.position=cc.p(t.x,this.m_firstPos.y),this.m_type=c.Normal),this.m_type==c.ReDown&&this.node.position.y<this.m_firstPos.y+100&&(this.m_type=c.ReDownRotate,this.reFightRotation())},onCollisionEnter:function(t,e){t.tag&this.nType||(this.node.stopAllActions(),this.unscheduleAllCallbacks(),this.die())},die:function(){this.m_type!=c.Death&&(this.m_type=c.Death,this.lookLock=!0,this.node.getComponent(cc.BoxCollider).active=!1,cc.core.beeDeath(this.id),this.Clip.play("Boom"),this.Clip.on("lastframe",function(){this.Clip.off("lastframe"),this.node.active=!1},this))},fire:function(){this.isFire=!0;var s=0,t=Math.floor(.1*this.id+G.GM.getLevel()*Math.random());t=Math.max(t,1);for(var o=[.2,.2,.2,.15,.15,.13][t=Math.min(t,5)],e=.4*this.getMoveTime(this.node.position,this.mPlayer.position)/t,i=0;i<t;i++)this.scheduleOnce(function(){s++;var t=cc.pAdd(this.node.position,this.bulletNodePoint.position),e=this.mPlayer.position,i=cc.pSub(e,t);i.x*=1-o*s,i.y*=1.1,cc.core.fire(t,i,this.nType)},e*i)},reFightRotation:function(){var t=cc.rotateTo(.8,0),e=cc.callFunc(function(){});this.node.runAction(cc.sequence(t,e))},downAndAtk:function(){var r=this;this.scheduleOnce(function(){r.lookLock=!1;var t=this.node.position,e=this.mPlayer.position,i=this.getMoveTime(e,t),s=1,o=-1;0<t.x&&(s=-1,o=1);var n=cc.bezierTo(i,[cc.pAdd(t,cc.p(200*s,-270)),cc.pAdd(e,cc.p(-200*o,350)),e]),c=cc.callFunc(function(){r.lookLock=!0}),h=cc.moveBy(.6,cc.p(0,-120)),a=cc.callFunc(function(){r.node.active=!1,r.reFight()});this.node.runAction(cc.sequence(n,c,h,a)),this.scheduleOnce(function(){r.fire()},1.2*cc.gm.beeFireTime)},.1)},getMoveTime:function(t,e){return cc.core.getBeeMoveTime(t,e)}}),cc._RF.pop()},{Constants:"Constants"}],GameManager:[function(t,e,i){"use strict";cc._RF.push(e,"5a064wY1YFNPKV428vfrBeA","GameManager");var c=t("formation"),s=t("Constants").OM,o=cc.Class({ctor:function(){this.level=1,this.life=1,this.score=0,this.killAllBee=0,this.levelKillBee=0,cc.sys.os==cc.sys.OS_WINDOWS?this.mode=s.AUTO:this.mode=s.BUTTON,this.armyList={},this.curArmy=this.formatArmy("Normal")},reset:function(){this.level=1,this.life=1,this.score=0,this.killAllBee=0,this.levelKillBee=0},formatArmy:function(t){this.armyName="Normal";for(var e=c[t],i={width:e[0].length,height:e.length,map:e,beeList:{}},s=0;s<e.length;s++)for(var o=0;o<e[s].length;o++){var n=e[s][o];0<n&&(i.beeList[n]=i.beeList[n]?i.beeList[n]:{max:0,die:0},i.beeList[n].max+=1)}return i},levelUp:function(){this.level+=1,this.resetBee()},restartGame:function(){this.reset(),this.resetBee()},relive:function(){this.life-=1,this.life<0&&(this.life=0)},resetBee:function(){var t=this.curArmy.beeList;for(var e in t){t[e].die=0}},isMode:function(t){return this.mode==t},layout:function(){return this.curArmy.map},getWidth:function(){return this.curArmy.width},getHeight:function(){return this.curArmy.height},getBee:function(t){return this.curArmy.beeList[t]},getLife:function(){return this.life},getScore:function(){return this.score},getLevel:function(){return this.level},getKillNum:function(){return this.levelKillBee},getAllKillNum:function(){return this.killAllBee},beeDeath:function(t){this.curArmy.beeList[t].die+=1,this.score+=t,this.killAllBee+=1,this.levelKillBee+=1},playerDie:function(){},isWin:function(){var t=this.curArmy.beeList;for(var e in t){var i=t[e];if(i.die<i.max)return!1}return!0}});e.exports=o,cc._RF.pop()},{Constants:"Constants",formation:"formation"}],GameOver:[function(t,e,i){"use strict";cc._RF.push(e,"32207MlUQ9BEIqgYl2hc/lZ","GameOver"),cc.Class({extends:cc.Component,properties:{},start:function(){this.node.setLocalZOrder(10)},onRestarClick:function(){this.node.active=!1,G.GM.restartGame(),cc.core.restart()},onReliveClick:function(){0<G.GM.getLife()&&(this.node.active=!1,G.GM.relive(),cc.core.relive())}}),cc._RF.pop()},{}],GameWin:[function(t,e,i){"use strict";cc._RF.push(e,"ea6d5zTcQlHt5r6GJ3jxpQj","GameWin"),cc.Class({extends:cc.Component,properties:{},start:function(){this.node.setLocalZOrder(10)},onOKClick:function(){this.node.active=!1,G.GM.levelUp(),cc.core.starGame()}}),cc._RF.pop()},{}],Global:[function(t,e,i){"use strict";cc._RF.push(e,"da592y5wmlCjYOlbLYINnz+","Global"),window.G={GM:null,SIZE:cc.view.getVisibleSize()},cc._RF.pop()},{}],Graphics:[function(t,e,i){"use strict";cc._RF.push(e,"80a1f/8KadPgLbN1W2uOdRT","Graphics"),cc.Class({extends:cc.Component,properties:{Player:{default:null,type:cc.Sprite},Enemy:{default:null,type:cc.Sprite},param:{default:10}},start:function(){var t=this.Enemy.node.position,e=this.Player.node.position,i=cc.pSub(t,this.node.position),s=1,o=-1;t.x<0&&(s*=-1,o*=-1);var n=cc.pSub(e,t),c=this.node.getComponent(cc.Graphics);c.moveTo(i),c.bezierCurveTo(i.x+75*s,i.y-120,i.x+n.x+51*o,i.y+n.y+50,i.x+n.x,i.y+n.y),c.stroke()}}),cc._RF.pop()},{}],Player:[function(t,e,i){"use strict";cc._RF.push(e,"0f2f14155RMybcmLoqSi2hq","Player");var s=t("Constants"),o=s.NODE_TYPE,n=s.PLANE_STATE,c=s.OM;cc.Class({extends:cc.Component,properties:{BulletPointNode:{default:null,type:cc.Node,displayName:"Bullet Point",tooltip:"子弹初始化位置"},pfBullet:{default:null,type:cc.Prefab,displayName:"Bullet",tooltip:"子弹预制件"},speedX:{default:10,tooltip:"横向移动速度"},Freq:{default:1,tooltip:"发射子弹频率(秒/次)"}},ctor:function(){this.nType=o.PLANE,this.eState=n.Normal},start:function(){this.collider=this.node.getComponent(cc.BoxCollider),this.animation=this.node.getComponent(cc.Animation),this.collider.tag=this.nType,G.GM.isMode(c.AUTO)&&this.startFire(!0)},reset:function(){this.eState=n.Normal,this.node.active=!0,this.animation.play("Plane_Idle"),this.collider.enabled=!0},onCollisionEnter:function(t,e){t.tag&this.nType||(this.collider.enabled=!1,this.die())},canMove:function(){return this.eState==n.Normal},move:function(t,e){if(this.canMove()){var i=this.node.position.x,s=this.node.position.y;e?i+=t.x:t.x<0?i-=this.speedX:0<t.x&&(i+=this.speedX),i=Math.min(i,320),i=Math.max(i,-320),this.node.position=cc.p(i,s)}},startFire:function(t){t&&!this.isFireSchedule?(this.isFireSchedule=!0,this.schedule(this.fire,this.Freq,cc.macro.REPEAT_FOREVER,0)):!t&&this.isFireSchedule&&(this.unschedule(this.fire),this.isFireSchedule=!1)},fire:function(){this.eState==n.Normal&&cc.core.fire(cc.pAdd(this.node.position,this.BulletPointNode.position),cc.v2(0,10),this.nType)},die:function(){this.eState!=n.Death&&(this.eState=n.Death,this.animation.play("Boom"),this.animation.active=!0,this.animation.on("lastframe",function(){this.animation.off("lastframe"),this.node.active=!1,cc.core.GameOver()},this))}}),cc._RF.pop()},{Constants:"Constants"}],Tool:[function(t,e,i){"use strict";cc._RF.push(e,"bdc249iQSBKQ4vfLZoGSguu","Tool"),cc.Class({extends:cc.Component,properties:{},start:function(){}}),cc._RF.pop()},{}],Utils:[function(t,e,i){"use strict";cc._RF.push(e,"af357EuBpxNorY5yPk65x0P","Utils"),e.exports={getCanvas:function(){return cc.director.getScene(),this.scene.getChildByName("Canvas")},handler:function(t,e){for(var i=arguments.length,s=Array(2<i?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];return function(){t.apply(e,s)}}},cc._RF.pop()},{}],XButton:[function(t,e,i){"use strict";cc._RF.push(e,"ee3904Q+yxAMZBwdDp1sXb0","XButton"),cc.Class({extends:cc.Component,properties:{interval:1/60,isRepeat:!1},ctor:function(){this.isTouch=!1,this.callback=null,this.target=null},start:function(){this.node.on(cc.Node.EventType.TOUCH_START,this._TOUCH_START,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this._TOUCH_MOVE,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this._TOUCH_CANCEL,this),this.node.on(cc.Node.EventType.TOUCH_END,this._TOUCH_END,this)},_TOUCH_START:function(){this.startSchedule()},_TOUCH_MOVE:function(){},_TOUCH_CANCEL:function(){this.stopSchedule()},_TOUCH_END:function(){this.stopSchedule()},startSchedule:function(t){if(!this.isTouch){this.isTouch=!0;var e=0;this.lastTime&&this.isRepeat&&(e=Date.now()-this.lastTime,(e=Math.max(e,0))>1e3*this.interval&&(e=0)),this.schedule(this.updateTouch,this.interval,cc.macro.REPEAT_FOREVER,e/1e3),0==e&&this.updateTouch()}},stopSchedule:function(){this.isTouch&&(this.unschedule(this.updateTouch),this.isTouch=!1)},updateTouch:function(){this.callback&&(this.callback.apply(this.target,[this.node]),this.isRepeat&&(this.lastTime=Date.now()))},on:function(t,e){this.callback=t,this.target=e}}),cc._RF.pop()},{}],formation:[function(t,e,i){"use strict";cc._RF.push(e,"1b0d6gmRgBDppF8BPnYeFw4","formation");e.exports={Normal:[[0,0,0,4,0,0,4,0,0,0],[0,0,3,3,3,3,3,3,0,0],[0,2,2,2,2,2,2,2,2,0],[1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1]],Normal1:[[0,0,0,4,0,0,0,0,0,0]]},cc._RF.pop()},{}]},{},["Utils","AudioManage","Bullet","CoreLogic","DefaulScript","Enemy","GameManager","GameOver","GameWin","Graphics","Player","Tool","XButton","formation","Constants","Global"]);